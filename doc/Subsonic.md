Subsonic
========

wavepipe features an emulated [Subsonic](http://www.subsonic.org/pages/index.jsp) API, which can be used with
clients which implement the Subsonic API.

There are some fundamental incompatibilities with the data model of Subsonic vs. wavepipe's own data model,
but where possible, efforts are made to emulate Subsonic in the most sane way possible.

To see which Subsonic API endpoints are currently available with wavepipe, check [GoDoc](http://godoc.org/github.com/mdlayher/wavepipe/subsonic).

Clients which are known to work include:
  - [Clementine](https://www.clementine-player.org/)
  - [Subsonic for Android](https://play.google.com/store/apps/details?id=net.sourceforge.subsonic.androidapp&hl=en)

If you find another client which works, feel free to send a pull request!  If you experience any issues using
a client, please [file an issue](https://github.com/mdlayher/wavepipe/issues)!

## Howto

The emulated Subsonic API is exposed via the same HTTP server as wavepipe's own, but is nested under the
`/subsonic` path.  In order to use the Subsonic API, you must first authenticate using wavepipe's own API.

This can be done using `curl` as follows:

```
$ curl -X POST -d "username=test&password=test&client=subsonic" http://localhost:8080/api/v0/login
```

The wavepipe API will return a [Session](http://godoc.org/github.com/mdlayher/wavepipe/data#Session) object:

```json
{
	"error": null,
	"session": {
		"id": 1,
		"userId": 1,
		"client": "subsonic",
		"expire": 1406406363,
		"key": "abcdef0123456789abcdef0123456789"
	}
}
```

Now that a wavepipe session has been generated, we may use the `key` as a "password" to access the Subsonic API.

```
$ curl http://localhost:8080/subsonic/rest/ping.view?u=test&p=abcdef0123456789abcdef0123456789&c=curl&v=1.8.0
<subsonic-response xmlns="http://subsonic.org/restapi" status="ok" version="1.8.0"></subsonic-response>
```

At this point, you have successfully authenticated to wavepipe's emulated Subsonic API.  Often, Subsonic clients
will ask for the following parameters:

| Name | Example | Description |
| :--: | :-----: | :---------: |
| host | `http://localhost:8080/subsonic` | The URL of your wavepipe server, with `/subsonic` path suffix. |
| username | `test` | The username used to authenticate to wavepipe's API. |
| password | `abcdef0123456789abcdef0123456789` | The API session key generated by wavepipe's API. |

Once these parameters have been set, you should be ready to go!

Feel free to [file an issue](https://github.com/mdlayher/wavepipe/issues) if you experience any trouble setting
up wavepipe to work with Subsonic clients.
